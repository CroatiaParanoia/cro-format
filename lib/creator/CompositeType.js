"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var dataType_1=require("@constant/dataType"),utils_1=require("@utils/utils"),PrimitiveType_1=require("./PrimitiveType");function isTypeInstance(e){return e instanceof PrimitiveType_1.default||e instanceof CompositeType}var CompositeType=function(){function e(e){var t=this,r=e.type,i=e.types,n=e.defaultValue,s=e.systemDefaultValue;if(this.default=function(e){return t.defaultValue=e,t},!i)throw new Error("the constructor need types to initialize");if(utils_1.typeOf(i)!==dataType_1.typeCollection.object&&!isTypeInstance(i))throw new Error("types error");this.type=r,this.types=i,this.defaultValue=n,this.systemDefaultValue=s}return Object.defineProperty(e.prototype,"rule",{get:function(){return[this.types,utils_1.computedInitValue(this.defaultValue,this.type,this.systemDefaultValue)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var e=this.rule,t=e[0],r=e[1];return[this.type,this.createType(t),r]},enumerable:!0,configurable:!0}),e.prototype.createType=function(e){return isTypeInstance(e)?e.value:Object.entries(e).reduce(function(e,t){var r,i=t[0],n=t[1];if(!isTypeInstance(n))throw new Error("the key: "+i+" 's value need to be extends class 'Typing'");return __assign(__assign({},e),((r={})[i]=n.value,r))},{})},e}();exports.default=CompositeType;